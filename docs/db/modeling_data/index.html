
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for Aqueduct, a Dart server-side framework.">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.9.0">
    
    
      
        <title>Modeling Data and Relationships - Aqueduct</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-0a3554af36.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../style/css/override.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Aqueduct" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Guides
                </span>
              
                <span class="md-header-nav__parent">
                  Databases and ORM
                </span>
              
            
            Modeling Data and Relationships
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="" data-md-lang-tokenizer="[\s\-]+">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/stablekernel/aqueduct" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Aqueduct
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/stablekernel/aqueduct" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../core_concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../tour/" title="Tour" class="md-nav__link">
      Tour
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../best_practices/" title="Best Practices" class="md-nav__link">
      Best Practices
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../intellij/" title="IntelliJ IDEA Templates" class="md-nav__link">
      IntelliJ IDEA Templates
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/getting-started/" title="1. Getting Started" class="md-nav__link">
      1. Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/executing-queries/" title="2. Reading from a Database" class="md-nav__link">
      2. Reading from a Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/storing-data/" title="3. Storing Data in a Database" class="md-nav__link">
      3. Storing Data in a Database
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/writing-tests/" title="4. Configuration and Testing" class="md-nav__link">
      4. Configuration and Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/oauth2/" title="5. Authentication and Authorization" class="md-nav__link">
      5. Authentication and Authorization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1">
    
    <label class="md-nav__link" for="nav-8-1">
      Application Configuration and Behavior
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        Application Configuration and Behavior
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../application/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application/channel/" title="Starting and Stopping Applications" class="md-nav__link">
      Starting and Stopping Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application/configure/" title="Configuring an Application and its Environment" class="md-nav__link">
      Configuring an Application and its Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application/structure/" title="Application and Project Structure" class="md-nav__link">
      Application and Project Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../application/threading/" title="Multi-threading" class="md-nav__link">
      Multi-threading
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Handling HTTP Requests
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        Handling HTTP Requests
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/controller/" title="Handling Requests and Sending Response" class="md-nav__link">
      Handling Requests and Sending Response
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/request_and_response/" title="Serializing Request and Response Bodies" class="md-nav__link">
      Serializing Request and Response Bodies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/resource_controller/" title="Request Binding with Resource Controllers" class="md-nav__link">
      Request Binding with Resource Controllers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/serving_files/" title="Serving Files and Caching" class="md-nav__link">
      Serving Files and Caching
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/websockets/" title="Websockets" class="md-nav__link">
      Websockets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/file_upload/" title="Uploading Files" class="md-nav__link">
      Uploading Files
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-3" type="checkbox" id="nav-8-3" checked>
    
    <label class="md-nav__link" for="nav-8-3">
      Databases and ORM
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-3">
        Databases and ORM
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../connecting/" title="Connecting to a Database" class="md-nav__link">
      Connecting to a Database
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Modeling Data and Relationships
      </label>
    
    <a href="./" title="Modeling Data and Relationships" class="md-nav__link md-nav__link--active">
      Modeling Data and Relationships
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#defining-a-table" title="Defining a Table" class="md-nav__link">
    Defining a Table
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-a-managed-object-subclass" title="Defining a Managed Object Subclass" class="md-nav__link">
    Defining a Managed Object Subclass
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeling-relationships" title="Modeling Relationships" class="md-nav__link">
    Modeling Relationships
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#special-behaviors" title="Special Behaviors" class="md-nav__link">
    Special Behaviors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enum-types" title="Enum Types" class="md-nav__link">
    Enum Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-variables" title="Private Variables" class="md-nav__link">
    Private Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transient-properties" title="Transient Properties" class="md-nav__link">
    Transient Properties
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-file-structure" title="Project File Structure" class="md-nav__link">
    Project File Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-one-to-many-relationship" title="Example: One-to-Many Relationship" class="md-nav__link">
    Example: One-to-Many Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-one-to-one-relationship" title="Example: One-to-One Relationship" class="md-nav__link">
    Example: One-to-One Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-many-to-many-relationship" title="Example: Many-to-Many Relationship" class="md-nav__link">
    Example: Many-to-Many Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-hierarchical-relationships-self-referencing" title="Example: Hierarchical Relationships (Self Referencing)" class="md-nav__link">
    Example: Hierarchical Relationships (Self Referencing)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../serialization/" title="Serialization and Deserialization" class="md-nav__link">
      Serialization and Deserialization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../executing_queries/" title="Basic Queries" class="md-nav__link">
      Basic Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced_queries/" title="Advanced Queries" class="md-nav__link">
      Advanced Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../transactions/" title="Transactions" class="md-nav__link">
      Transactions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../validations/" title="Validations" class="md-nav__link">
      Validations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../db_tools/" title="Migration and Tooling" class="md-nav__link">
      Migration and Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../json_columns/" title="JSON Document Storage" class="md-nav__link">
      JSON Document Storage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4">
    
    <label class="md-nav__link" for="nav-8-4">
      Authorization and OAuth 2.0
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-4">
        Authorization and OAuth 2.0
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/server/" title="Setting up Authorization" class="md-nav__link">
      Setting up Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/authorizer/" title="Protecting Routes" class="md-nav__link">
      Protecting Routes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/controllers/" title="Issuing Access Tokens" class="md-nav__link">
      Issuing Access Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/cli/" title="Managing OAuth 2.0 Clients" class="md-nav__link">
      Managing OAuth 2.0 Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/auth_scopes/" title="OAuth 2.0 Scoping" class="md-nav__link">
      OAuth 2.0 Scoping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/what_is_oauth/" title="What is OAuth 2.0?" class="md-nav__link">
      What is OAuth 2.0?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-5" type="checkbox" id="nav-8-5">
    
    <label class="md-nav__link" for="nav-8-5">
      Development and Testing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-5">
        Development and Testing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/tests/" title="Writing Tests" class="md-nav__link">
      Writing Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/mixins/" title="Testing with the ORM and OAuth 2.0" class="md-nav__link">
      Testing with the ORM and OAuth 2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/debugger/" title="Using the Debugger" class="md-nav__link">
      Using the Debugger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/clients/" title="Developing Client Applications" class="md-nav__link">
      Developing Client Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/mock/" title="Mocking Services" class="md-nav__link">
      Mocking Services
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-6" type="checkbox" id="nav-8-6">
    
    <label class="md-nav__link" for="nav-8-6">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-6">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_local/" title="Deploy Locally" class="md-nav__link">
      Deploy Locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_docker/" title="Deploying with Docker and Kubernetes" class="md-nav__link">
      Deploying with Docker and Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_heroku/" title="Deploy on Heroku" class="md-nav__link">
      Deploy on Heroku
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_aws/" title="Deploy on AWS" class="md-nav__link">
      Deploy on AWS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/script/" title="Deploying without aqueduct serve" class="md-nav__link">
      Deploying without aqueduct serve
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-7" type="checkbox" id="nav-8-7">
    
    <label class="md-nav__link" for="nav-8-7">
      OpenAPI Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-7">
        OpenAPI Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../openapi/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openapi/cli/" title="Creating an OpenAPI Document" class="md-nav__link">
      Creating an OpenAPI Document
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openapi/components/" title="Documenting Components" class="md-nav__link">
      Documenting Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openapi/endpoint/" title="Documenting Endpoint Controllers" class="md-nav__link">
      Documenting Endpoint Controllers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openapi/middleware/" title="Documenting Middleware Controllers" class="md-nav__link">
      Documenting Middleware Controllers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-8" type="checkbox" id="nav-8-8">
    
    <label class="md-nav__link" for="nav-8-8">
      Command-line Tooling
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-8">
        Command-line Tooling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/create/" title="Creating Applications" class="md-nav__link">
      Creating Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/running/" title="Running Applications" class="md-nav__link">
      Running Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cli/document/" title="Generating an OpenAPI/Swagger Specification" class="md-nav__link">
      Generating an OpenAPI/Swagger Specification
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Snippets
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Snippets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../snippets/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../snippets/http/" title="HTTP" class="md-nav__link">
      HTTP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../snippets/orm/" title="ORM" class="md-nav__link">
      ORM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../snippets/auth/" title="Authentication and Authorization" class="md-nav__link">
      Authentication and Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../snippets/test/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#defining-a-table" title="Defining a Table" class="md-nav__link">
    Defining a Table
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-a-managed-object-subclass" title="Defining a Managed Object Subclass" class="md-nav__link">
    Defining a Managed Object Subclass
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modeling-relationships" title="Modeling Relationships" class="md-nav__link">
    Modeling Relationships
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#special-behaviors" title="Special Behaviors" class="md-nav__link">
    Special Behaviors
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enum-types" title="Enum Types" class="md-nav__link">
    Enum Types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-variables" title="Private Variables" class="md-nav__link">
    Private Variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transient-properties" title="Transient Properties" class="md-nav__link">
    Transient Properties
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-file-structure" title="Project File Structure" class="md-nav__link">
    Project File Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-one-to-many-relationship" title="Example: One-to-Many Relationship" class="md-nav__link">
    Example: One-to-Many Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-one-to-one-relationship" title="Example: One-to-One Relationship" class="md-nav__link">
    Example: One-to-One Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-many-to-many-relationship" title="Example: Many-to-Many Relationship" class="md-nav__link">
    Example: Many-to-Many Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-hierarchical-relationships-self-referencing" title="Example: Hierarchical Relationships (Self Referencing)" class="md-nav__link">
    Example: Hierarchical Relationships (Self Referencing)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/stablekernel/aqueduct/edit/docs/source/source/docs/db/modeling_data.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="modeling-data">Modeling Data</h1>
<p>In this guide, you will learn how to create types that are mapped to database tables. At the end of this guide are additional examples of data model types.</p>
<h2 id="defining-a-table">Defining a Table</h2>
<p>In your application, you declare types whose instances are stored in a database. Each of these types is mapped to a database table, where each property of the type is a column of the table. For example, consider modeling newspaper articles, where each article has a unique identifier, text contents and published date:</p>
<div class="codehilite"><pre><span></span><span class="c1">// This is a table definition of an &#39;article&#39;</span>
<span class="kd">class</span> <span class="nc">_Article</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">Column</span><span class="p">(</span><span class="nl">primaryKey:</span> <span class="kc">true</span><span class="p">)</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">contents</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Column</span><span class="p">(</span><span class="nl">indexed:</span> <span class="kc">true</span><span class="p">)</span>
  <span class="n">DateTime</span> <span class="n">publishedDate</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>This plain Dart class is called a <em>table definition</em> because it defines a database table named <code>_Article</code>. The table has three columns, <code>id</code>, <code>contents</code>, <code>publishedDate</code>. An example of the data stored in this table might look like this:</p>
<table>
<thead>
<tr>
<th>id</th>
<th>contents</th>
<th>publishedDate</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Today, the local...</td>
<td>2018-02-01 00:00:00.000</td>
</tr>
<tr>
<td>2</td>
<td>In other news, ...</td>
<td>2018-03-01 04:30:00.000</td>
</tr>
</tbody>
</table>
<p>A property in a table definition can optionally have a <code>Column</code> annotation. This annotation configures the behavior of the associated database column. If a property doesn't have an annotation, the column has default behavior. These behaviors are shown in the table below:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Behavior</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>primaryKey</td>
<td><code>bool</code></td>
<td>sets primary key column</td>
<td>false (not primary key)</td>
</tr>
<tr>
<td>databaseType</td>
<td><code>ManagedPropertyType</code></td>
<td>sets underlying column type</td>
<td>inferred from Dart type</td>
</tr>
<tr>
<td>nullable</td>
<td><code>bool</code></td>
<td>toggles whether column can be null</td>
<td>false (not nullable)</td>
</tr>
<tr>
<td>unique</td>
<td><code>bool</code></td>
<td>toggles whether column is unique across all rows</td>
<td>false (not unique)</td>
</tr>
<tr>
<td>defaultValue</td>
<td><code>String</code></td>
<td>provides default value for new rows when value is undefined</td>
<td>null</td>
</tr>
<tr>
<td>indexed</td>
<td><code>bool</code></td>
<td>whether an index should be created for the column</td>
<td>false (no index)</td>
</tr>
<tr>
<td>omitByDefault</td>
<td><code>bool</code></td>
<td>whether this column should be left out by default</td>
<td>false (fetch column value)</td>
</tr>
<tr>
<td>autoincrement</td>
<td><code>bool</code></td>
<td>whether this column's value is automatically generated from a series</td>
<td>false (not generated)</td>
</tr>
</tbody>
</table>
<p>You must use either zero or one <code>Column</code> annotation per property, and you must set all behaviors in one annotation, e.g.:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Column</span><span class="p">(</span><span class="nl">nullable:</span> <span class="kc">true</span><span class="p">,</span> <span class="nl">unique:</span> <span class="kc">true</span><span class="p">,</span> <span class="nl">indexed:</span> <span class="kc">true</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">field</span><span class="p">;</span>
</pre></div>


<p>The data type of a column is inferred from the Dart type of the property as shown by the following table.</p>
<table>
<thead>
<tr>
<th>Dart Type</th>
<th>General Column Type</th>
<th>PostgreSQL Column Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>integer number</td>
<td><code>INT</code> or <code>SERIAL</code></td>
</tr>
<tr>
<td><code>double</code></td>
<td>floating point number</td>
<td><code>DOUBLE PRECISION</code></td>
</tr>
<tr>
<td><code>String</code></td>
<td>text</td>
<td><code>TEXT</code></td>
</tr>
<tr>
<td><code>DateTime</code></td>
<td>timestamp</td>
<td><code>TIMESTAMP</code></td>
</tr>
<tr>
<td><code>bool</code></td>
<td>boolean</td>
<td><code>BOOLEAN</code></td>
</tr>
<tr>
<td><code>Document</code></td>
<td>a JSON object or array</td>
<td><code>JSONB</code></td>
</tr>
<tr>
<td>Any <code>enum</code></td>
<td>text, restricted to enum cases</td>
<td><code>TEXT</code></td>
</tr>
</tbody>
</table>
<p>Some types can be represented by many database types; for example, an integer can be stored as 2, 4 or 8 bytes. Use the <code>databaseType</code> of a <code>Column</code> annotation to specify:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Column</span><span class="p">(</span><span class="nl">databaseType:</span> <span class="n">ManagedPropertyType</span><span class="p">.</span><span class="n">bigInteger</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">bigNumber</span><span class="p">;</span>
</pre></div>


<p>The only requirement of a table definition type is that it has exactly one primary key property. A primary key is an indexed, unique identifier for a database row and is set through the <code>Column</code> annotation.</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Column</span><span class="p">(</span><span class="nl">primaryKey:</span> <span class="kc">true</span><span class="p">)</span>
<span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
</pre></div>


<p>A primary key can be any supported data type, and it is always unique and indexed. It is common for primary keys to be 64-bit, auto-incrementing integers. The <code>primaryKey</code> constant exists as a convenience for a <code>Column</code> with these behaviors.</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">_Article</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span> <span class="c1">// equivalent to @Column(primaryKey: true, databaseType: ManagedPropertyType.bigInteger, autoincrement: true)</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Creating Tables</p>
<p>Tables are created in a database by using the <code>aqueduct</code> command line tool to generate and execute migration scripts. The tool inspects your database types and automatically synchronizes a databases schema to match your them.</p>
</div>
<p>By default, the name of the table definition is the name of the database table. You can configure this with the <code>Table</code> annotation.</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Table</span><span class="p">(</span><span class="nl">name:</span> <span class="s2">&quot;ArticleTable&quot;</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">_Article</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">contents</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Column</span><span class="p">(</span><span class="nl">indexed:</span> <span class="kc">true</span><span class="p">)</span>
  <span class="n">DateTime</span> <span class="n">publishedDate</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>It is convention that table definitions are <em>private classes</em>, that is, their name is prefixed with an underscore (<code>_</code>). This convention is discussed later in this guide.</p>
<h2 id="defining-a-managed-object-subclass">Defining a Managed Object Subclass</h2>
<p>A table definition by itself is just a plain Dart class. You must also declare a <code>ManagedObject</code> subclass to bring your table definition to life. Here's an example:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Article</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Article</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Article</span> <span class="p">{}</span>
</pre></div>


<p>A managed object subclass, also called the <em>instance type</em>, is the object type that you work with in your application code. For example, when you fetch rows from a database, you will get a list of managed objects. A managed object subclass declares its table definition in two places: once as the type argument of its superclass, and again as an interface it implements.</p>
<p>A managed object subclass inherits all of the properties from its table definition; i.e., an <code>Article</code> has an <code>id</code>, <code>contents</code> and <code>publishedDate</code> because <code>_Article</code> declares those properties. You create and use instances of a managed object subclass like any other object:</p>
<div class="codehilite"><pre><span></span><span class="kd">final</span> <span class="n">article</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Article</span><span class="p">();</span>
<span class="n">article</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Today, ...&quot;</span><span class="p">;</span>
<span class="n">article</span><span class="p">.</span><span class="n">publishedDate</span> <span class="o">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">();</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">Managed Object Constructors</p>
<p>You can add new constructors to a managed object subclass, but you must always have a default, no-argument constructor. This default constructor is used when the ORM creates instances from rows in your database.</p>
</div>
<h2 id="modeling-relationships">Modeling Relationships</h2>
<p>A managed object can have <em>relationships</em> to other managed objects. For example, an author can have many books, an article can belong to a newspaper, and an employee can have a manager. In a relational database, relationships between tables are established by storing the primary key of a table row in a column of the related table. This column is a <em>foreign key reference</em> to the related table.</p>
<p>When a table has a foreign key reference, it is said to <em>belong to</em> the related table. In the example of an employee and manager, the employee <em>belongs to</em> the manager and therefore the employee table has a foreign key reference to the manager table. The inverse of this statement is also true: a manager <em>has</em> employees. A manager has-many employees - this is called a <em>has-many relationship</em>. There are also <em>has-one relationships</em> - for example, a country has-one capital.</p>
<p>The following is an example of a country and a has-one relationship to a capital city:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">City</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_City</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_City</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_City</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">capital</span><span class="p">)</span>
  <span class="n">Country</span> <span class="n">country</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Country</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Country</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Country</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Country</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="n">City</span> <span class="n">capital</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>A relationship is formed between two tables by declaring properties in both table definition types. The type of those properties is the related managed object subclass - so a <code>Country</code> has a property of type <code>City</code>, and a <code>City</code> has a property of type <code>Country</code>.</p>
<p>Exactly one of those properties must have a <code>Relate</code> annotation. The <code>Relate</code> annotation designates the underlying column as a foreign key column. In this example, the city table has a foreign key column to the country table. Conceptually, then, a city <em>belongs to</em> a country and a country has-one capital city. A city can only belong to one country through this relationship, and that is true of all belongs-to relationship properties.</p>
<div class="admonition note">
<p class="admonition-title">Foreign Key Column Names</p>
<p>A foreign key column in the database is named by joining the name of the relationship property and the primary key of the related table with an underscore. For example, the column in the city table is named <code>country_id</code>.</p>
</div>
<p>The property without <code>Relate</code> is the <em>inverse</em> of the relationship and is conceptually either a has-one or has-many relationship property. In this example, a country's relationship to its capital is has-one. A relationship is has-many when the type of the inverse property is a <code>ManagedSet</code>. For example, if we wanted to model a relationship between a country and all of its cities, we'd declare a <code>ManagedSet&lt;City&gt;</code> property in the country:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">City</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_City</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_City</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_City</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">cities</span><span class="p">)</span>
  <span class="n">Country</span> <span class="n">country</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Country</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Country</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Country</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Country</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="n">ManagedSet</span><span class="o">&lt;</span><span class="n">City</span><span class="o">&gt;</span> <span class="n">cities</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">ManagedSet Behavior</p>
<p>A <code>Relate</code> property can never be a <code>ManagedSet</code>. A <code>ManagedSet</code> is a <code>List</code>, and therefore can be used in the same way a list is used.</p>
</div>
<p>Notice that the <code>Relate</code> annotation takes at least one argument: a symbol that matches the name of the inverse property. This is what links two relationship properties to each other. In the first example, this argument was <code>#capital</code> because the name of the inverse property is <code>capital</code>; likewise, <code>#cities</code> and <code>cities</code>. This pairing name must match or an error will be thrown.</p>
<div class="admonition note">
<p class="admonition-title">Symbols</p>
<p>A symbol is a name identifier in Dart; a symbol can refer to a class, method, or property. The <code>#name</code> syntax is a <em>symbol literal</em>.</p>
</div>
<p>The <code>Relate</code> annotation has optional arguments to further define the relationship. Like <code>Column</code>, these are optional arguments, e.g.:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">cities</span><span class="p">,</span> <span class="nl">isRequired:</span> <span class="kc">true</span><span class="p">,</span> <span class="nl">onDelete:</span> <span class="n">DeleteRule</span><span class="p">.</span><span class="n">cascade</span><span class="p">)</span>
</pre></div>


<p>A relationship may be be required or optional. For example, if <code>City.country</code> were required, then a <code>City</code> must always have a <code>Country</code>. By default, relationships are optional.</p>
<p>A relationship has a delete rule. When an object is deleted, any objects that belong to its relationships are subject to this rule. The following table shows the rules and their behavior:</p>
<table>
<thead>
<tr>
<th>Rule</th>
<th>Behavior</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>nullify (default)</td>
<td>inverse is set to null</td>
<td>When deleting an author, its articles' author becomes null</td>
</tr>
<tr>
<td>cascade</td>
<td>related objects are also deleted</td>
<td>When deleting an author, its articles are deleted</td>
</tr>
<tr>
<td>restrict</td>
<td>delete fails</td>
<td>When attempting to delete an author with articles, the delete operation fails</td>
</tr>
<tr>
<td>default</td>
<td>inverse set to a default value</td>
<td>When deleting an author, its articles author is set to the default value of the column</td>
</tr>
</tbody>
</table>
<h2 id="special-behaviors">Special Behaviors</h2>
<h3 id="enum-types">Enum Types</h3>
<p>Enums types can be used to declare properties in a table definition. The database will store the column as a string representation of the enumeration. Here's an example where a user can be an administrator or a normal user:</p>
<div class="codehilite"><pre><span></span><span class="n">enum</span> <span class="n">UserType</span> <span class="p">{</span>
  <span class="n">admin</span><span class="p">,</span> <span class="n">user</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">User</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_User</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_User</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_User</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="n">UserType</span> <span class="n">role</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">role</span> <span class="o">=</span> <span class="n">UserType</span><span class="p">.</span><span class="n">admin</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">bob</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">insert</span><span class="p">();</span>

<span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">where</span><span class="p">((</span><span class="n">u</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">u</span><span class="p">.</span><span class="n">role</span><span class="p">).</span><span class="n">equalTo</span><span class="p">(</span><span class="n">UserType</span><span class="p">.</span><span class="n">admin</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">allAdmins</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">fetch</span><span class="p">();</span>
</pre></div>


<p>In the database, the <code>role</code> column is stored as a string. Its value is either "admin" or "user".</p>
<h3 id="private-variables">Private Variables</h3>
<p>A private variable in a table definition removes it from the serialized representation of an object. A private variable is always fetched when making a database query, but it is not read when invoking <code>read</code> and is not written when invoking <code>asMap</code>. Both of these methods are invoked when reading a managed object from a request body, or writing it to a response body.</p>
<h3 id="transient-properties">Transient Properties</h3>
<p>Properties declared in a managed object subclass are called <em>transient</em> because they are not stored in a database. For example, consider an <code>Author</code> type that stores first and last name as separate columns. Instead of redundantly storing a 'full name' in the database, a transient property can combine the first and last name:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Author</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Author</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="kd">get</span> <span class="n">name</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">$</span><span class="n">firstName</span><span class="s2"> </span><span class="si">$</span><span class="n">lastName</span><span class="s2">&quot;</span><span class="p">;</span>
  <span class="kd">set</span> <span class="n">name</span><span class="p">(</span><span class="kt">String</span> <span class="n">fullName</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">firstName</span> <span class="o">=</span> <span class="n">fullName</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">).</span><span class="n">first</span><span class="p">;</span>
    <span class="n">lastName</span> <span class="o">=</span> <span class="n">fullName</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">).</span><span class="n">last</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">_Author</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">firstName</span><span class="p">;</span>
  <span class="kt">String</span> <span class="n">lastName</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>By default, a transient property is ignored when reading an object from a request body or writing the object to a response body (see the guide on <a href="../serialization/">serialization</a> for more details). You can annotate a transient property with <code>Serialize</code> so that it is able to be read from a request body, written to a response body, or both. For example:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Author</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Author</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">Serialize</span><span class="p">()</span>
  <span class="kt">String</span> <span class="kd">get</span> <span class="n">name</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">$</span><span class="n">firstName</span><span class="s2"> </span><span class="si">$</span><span class="n">lastName</span><span class="s2">&quot;</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Serialize</span><span class="p">()</span>
  <span class="kd">set</span> <span class="n">name</span><span class="p">(</span><span class="kt">String</span> <span class="n">fullName</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">firstName</span> <span class="o">=</span> <span class="n">fullName</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">).</span><span class="n">first</span><span class="p">;</span>
    <span class="n">lastName</span> <span class="o">=</span> <span class="n">fullName</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">).</span><span class="n">last</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>You may declare getters, setters and properties to be serialized in this way. When declaring a property, you can control it with arguments to <code>Serialize</code>:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Author</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Author</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">Serialize</span><span class="p">(</span><span class="nl">input:</span> <span class="kc">false</span><span class="p">,</span> <span class="nl">output:</span> <span class="kc">true</span><span class="p">)</span>
  <span class="kt">bool</span> <span class="n">isCurrentlyPromoted</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h2 id="project-file-structure">Project File Structure</h2>
<p>A managed object subclass and its table definition together are called an <em>entity</em>. Each entity should be declared in the same file, and the table definition should be prefixed with an <code>_</code> to prevent it from being used elsewhere in the project. It is preferable to declare one entity per file, and store all entities in the <code>lib/model/</code> directory of your project.</p>
<p>The files your model definitions are declared in must be visible to Aqueduct tooling. In normal circumstances, this happens automatically because of the following:</p>
<ol>
<li>Aqueduct tooling can find any file that is imported (directly or transitively) from your library file.</li>
<li>Your library file, by default, can see the file your <code>ApplicationChannel</code> is declared in.</li>
<li>Your application channel file must import any controller that it links.</li>
<li>Your controllers must import any model file they use.</li>
</ol>
<p>When you use the <code>aqueduct</code> CLI to generate database migration scripts, it will report all of the <code>ManagedObject</code>s in your application that it was able to find. If a particular type is not listed, it may reveal that you aren't using that type. If you need to ensure that the tooling can see a particular model file that it is not locating, you may import it in your <code>channel.dart</code> file.</p>
<h2 id="examples">Examples</h2>
<h3 id="example-one-to-many-relationship">Example: One-to-Many Relationship</h3>
<p>An author has many books:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Author</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Author</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Author</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Author</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="n">ManagedSet</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span> <span class="n">books</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Book</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Book</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Book</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Book</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">books</span><span class="p">)</span>
  <span class="n">Author</span> <span class="n">author</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>To insert an author and a book associated with that author:</p>
<div class="codehilite"><pre><span></span><span class="kd">final</span> <span class="n">authorQuery</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Fred&quot;</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">author</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">authorQuery</span><span class="p">.</span><span class="n">insert</span><span class="p">();</span>

<span class="kd">final</span> <span class="n">bookQuery</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Title&quot;</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">author</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">author</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">book</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">bookQuery</span><span class="p">.</span><span class="n">insert</span><span class="p">();</span>  
</pre></div>


<p>To fetch authors and their books:</p>
<div class="codehilite"><pre><span></span><span class="kd">final</span> <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">join</span><span class="p">(</span><span class="kd">set</span><span class="o">:</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">books</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">authors</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">fetch</span><span class="p">();</span>
</pre></div>


<p>To fetch a book and their full author object:</p>
<div class="codehilite"><pre><span></span><span class="kd">final</span> <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">where</span><span class="p">((</span><span class="n">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">equalTo</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
  <span class="p">..</span><span class="n">join</span><span class="p">(</span><span class="nl">object:</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">author</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">books</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">fetch</span><span class="p">();</span>
</pre></div>


<h3 id="example-one-to-one-relationship">Example: One-to-One Relationship</h3>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Country</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Country</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Country</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Country</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="n">City</span> <span class="n">capital</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">City</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_City</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_City</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_City</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">capital</span><span class="p">)</span>
  <span class="n">Country</span> <span class="n">country</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>To fetch a country and its capital:</p>
<div class="codehilite"><pre><span></span><span class="kd">final</span> <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Country</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">where</span><span class="p">((</span><span class="n">c</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">equalTo</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
  <span class="p">..</span><span class="n">join</span><span class="p">(</span><span class="nl">object:</span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">capital</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">countries</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">fetch</span><span class="p">();</span>
</pre></div>


<h3 id="example-many-to-many-relationship">Example: Many-to-Many Relationship</h3>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Team</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Team</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Team</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Team</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="n">ManagedSet</span><span class="o">&lt;</span><span class="n">TeamPlayer</span><span class="o">&gt;</span> <span class="n">teamPlayers</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// This type is a join table</span>
<span class="kd">class</span> <span class="nc">TeamPlayer</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_TeamPlayer</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_TeamPlayer</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_TeamPlayer</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>  

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">teamPlayers</span><span class="p">)</span>
  <span class="n">Team</span> <span class="n">team</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">teamPlayers</span><span class="p">)</span>
  <span class="n">Player</span> <span class="n">player</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Player</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Player</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Player</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Player</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="n">ManagedSet</span><span class="o">&lt;</span><span class="n">TeamPlayer</span><span class="o">&gt;</span> <span class="n">teamPlayers</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>To fetch a team and its players:</p>
<div class="codehilite"><pre><span></span><span class="c1">// Note that the final join is not cascaded from the Team query,</span>
<span class="c1">// but from the Query created by joining with TeamPlayer</span>
<span class="kd">final</span> <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Team</span><span class="o">&gt;</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="p">..</span><span class="n">where</span><span class="p">((</span><span class="n">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">id</span><span class="p">).</span><span class="n">equalTo</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
  <span class="p">..</span><span class="n">join</span><span class="p">(</span><span class="kd">set</span><span class="o">:</span> <span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">teamPlayers</span><span class="p">).</span><span class="n">join</span><span class="p">(</span><span class="nl">object:</span> <span class="p">(</span><span class="n">tp</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">tp</span><span class="p">.</span><span class="n">player</span><span class="p">);</span>
<span class="kd">final</span> <span class="n">team</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">fetchOne</span><span class="p">();</span>
</pre></div>


<p>The structure of this object is:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Badgers&quot;</span><span class="p">,</span>
  <span class="nt">&quot;teamPlayers&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nt">&quot;team&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span>
      <span class="p">},</span>
      <span class="nt">&quot;player&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Fred&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>You can flatten this structure in a number of ways. In the simplest form, add a <code>Serialize</code>-annotated transient property to the <code>ManagedObject</code> subclass, and each time you fetch, remove the join table from the object and place the players in the transient property.</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Team</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Team</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Team</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">Serialize</span><span class="p">(</span><span class="nl">input:</span> <span class="kc">false</span><span class="p">,</span> <span class="nl">output:</span> <span class="kc">true</span><span class="p">)</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">dynamic</span><span class="o">&gt;&gt;</span> <span class="n">players</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">final</span> <span class="n">team</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">team</span><span class="p">.</span><span class="n">players</span> <span class="o">=</span> <span class="n">team</span><span class="p">.</span><span class="n">teamPlayers</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">t</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">player</span><span class="p">.</span><span class="n">asMap</span><span class="p">()).</span><span class="n">toList</span><span class="p">();</span>
<span class="c1">// Remove teamPlayers; it is redundant</span>
<span class="n">team</span><span class="p">.</span><span class="n">backing</span><span class="p">.</span><span class="n">removeProperty</span><span class="p">(</span><span class="s2">&quot;teamPlayers&quot;</span><span class="p">);</span>
</pre></div>


<h3 id="example-hierarchical-relationships-self-referencing">Example: Hierarchical Relationships (Self Referencing)</h3>
<p>Hierarchical relationships follow the same rules as all other relationship, but declare the foreign key property and the inverse in the same type.</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Person</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Person</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Person</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Person</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">primaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>

  <span class="n">ManagedSet</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">children</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Relate</span><span class="p">(</span><span class="err">#</span><span class="n">children</span><span class="p">)</span>
  <span class="n">Person</span> <span class="n">parent</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../connecting/" title="Connecting to a Database" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Connecting to a Database
              </span>
            </div>
          </a>
        
        
          <a href="../serialization/" title="Serialization and Deserialization" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Serialization and Deserialization
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Built by Stable Kernel
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-3700c4cc12.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-41269877-2","aqueduct.io"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>